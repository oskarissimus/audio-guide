<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#111" />
    <title>Audio Przewodnik</title>
    <style>
      :root { color-scheme: light dark; }
      html, body { margin: 0; padding: 0; height: 100%; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
      body { display: flex; align-items: center; justify-content: center; background: #0b0b0c; color: #f0f0f2; }
      .container { width: 100%; max-width: 480px; padding: 16px; box-sizing: border-box; }
      .card { background: #151518; border: 1px solid #27272a; border-radius: 12px; padding: 16px; }
      h1 { font-size: 1.25rem; margin: 0 0 8px; }
      .stage { margin: 12px 0; font-size: 0.95rem; }
      .stage .label { opacity: 0.8; }
      .status { margin: 12px 0; padding: 12px; background: #111114; border: 1px dashed #2a2a2f; border-radius: 8px; min-height: 64px; white-space: pre-wrap; word-break: break-word; }
      .controls { display: flex; gap: 8px; margin-top: 12px; }
      button { flex: 1; padding: 12px 14px; border-radius: 10px; border: 1px solid #2a2a2f; background: #1e1e22; color: #fff; font-size: 1rem; touch-action: manipulation; }
      select { flex: 1; padding: 12px 14px; border-radius: 10px; border: 1px solid #2a2a2f; background: #1e1e22; color: #fff; font-size: 1rem; }
      button.primary { background: #2563eb; border-color: #2563eb; }
      button:disabled { opacity: 0.5; }
      .small { font-size: 0.85rem; opacity: 0.9; }
      .error { color: #ff8a8a; }
      .ok { color: #86efac; }
      .hint { margin-top: 8px; opacity: 0.75; font-size: 0.85rem; }
      .kv { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: 0.85rem; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="card">
        <h1>Audio przewodnik</h1>
        <div class="stage"><span class="label">Etap:</span> <strong id="stage">Bezczynny</strong></div>
        <div id="status" class="status">Gotowy. Dotknij „Start”, aby rozpocząć. Upewnij się, że zezwoliłeś na lokalizację i dźwięk.</div>
        <div class="controls">
          <select id="lang" aria-label="Language">
            <option value="pl">Polski</option>
            <option value="en">English</option>
          </select>
          <button id="startBtn" class="primary">Start</button>
          <button id="stopBtn" disabled>Stop</button>
        </div>
        <div class="hint">Wymagane jest zezwolenie na lokalizację i pierwsze dotknięcie, aby włączyć odtwarzanie audio na iPhone.</div>
        <div class="hint small">Klucze wbudowane podczas kompilacji: <span class="kv">VITE_OPENAI_API_KEY</span>, <span class="kv">VITE_ELEVENLABS_API_KEY</span>.</div>
        <audio id="player" preload="auto" playsinline></audio>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
  </html>

